id: plasma_pdu_file_source
label: PDU File Source
category: "[plasma]/PDU"

parameters:
  # TODO: Add type parameter
  - id: data_filename
    label: Data File
    dtype: file_save
  - id: load_meta
    label: Load metadata
    dtype: bool
    default: False
    options: [False, True]
  - id: meta_filename
    label: Meta filename
    dtype: file_save
    default: ''
    hide: ${'all' if load_meta == False else 'none'}
  - id: offset
    label: Offset
    dtype: int
    default: 0
  - id: length
    label: Length
    dtype: int
    default: 0
  - id: pdu_length
    label: PDU length
    dtype: int
    default: -1
    hide: ${'part' if pdu_length == -1 else 'none'}

outputs:
  - id: out
    domain: message

templates:
  imports: from gnuradio import plasma
  make: |-
    plasma.pdu_file_source(${data_filename},${meta_filename},${offset},${length}, ${pdu_length})
  
file_format: 1
